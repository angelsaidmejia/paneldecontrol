<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1a2742">
  <title>Panel de Control - Antojitos La Bendición</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header -->
  <header class="page-header">
    <div class="header-content">
      <button class="btn-icon btn-primary" id="btnCustomers" aria-label="Gestión de clientes">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
      </button>
      <h1 class="header-title">Panel de Control</h1>
      <button class="btn-icon btn-primary" id="btnSearch" aria-label="Buscar productos">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Contenido Principal -->
  <main class="container">
    <!-- Pedidos Pendientes -->
    <div class="card">
      <div class="card-header">
        <div class="card-header-left">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <h2 class="card-title">Pedidos Pendientes</h2>
          <span class="card-badge" id="pendingCount">0</span>
        </div>
      </div>
      <div class="card-content">
        <div class="list" id="pendingOrdersList">
          <!-- Se llenará dinámicamente -->
        </div>
      </div>
      <div class="card-footer">
        <span class="text-success" id="pendingTotal">Total: $0.00</span>
      </div>
    </div>

    <!-- Pedidos Completados -->
    <div class="card">
      <div class="card-header">
        <div class="card-header-left">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <h2 class="card-title">Pedidos Completados Hoy</h2>
          <span class="card-badge" id="completedCount">0</span>
        </div>
      </div>
      <div class="card-content">
        <div class="list" id="completedOrdersList">
          <!-- Se llenará dinámicamente -->
        </div>
      </div>
      <div class="card-footer">
        <span class="text-success" id="completedTotal">Total ganado: $0.00</span>
        <button class="btn btn-success btn-sm" id="btnEndDay">Terminar Día</button>
      </div>
    </div>

    <!-- Preview de Deudas -->
    <div class="card">
      <div class="card-header">
        <div class="card-header-left">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
          </svg>
          <h2 class="card-title">Deudas Principales</h2>
        </div>
      </div>
      <div class="card-content">
        <div class="list" id="debtsPreviewList">
          <!-- Se llenará dinámicamente -->
        </div>
      </div>
      <div class="card-footer">
        <a href="deudas.html" class="btn btn-primary btn-sm">Ver Todas las Deudas</a>
      </div>
    </div>

    <!-- Estadísticas del Día -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-card-header">
          <div class="stat-card-icon success">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
          </div>
        </div>
        <div class="stat-card-value" id="todayRevenue">$0.00</div>
        <div class="stat-card-label">Ventas Hoy</div>
      </div>

      <div class="stat-card">
        <div class="stat-card-header">
          <div class="stat-card-icon primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            </svg>
          </div>
        </div>
        <div class="stat-card-value" id="todayOrders">0</div>
        <div class="stat-card-label">Pedidos Hoy</div>
      </div>

      <div class="stat-card">
        <div class="stat-card-header">
          <div class="stat-card-icon warning">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
              <polyline points="17 6 23 6 23 12"/>
            </svg>
          </div>
        </div>
        <div class="stat-card-value" id="topProduct">-</div>
        <div class="stat-card-label">Más Vendido</div>
      </div>
    </div>

    <div class="text-center">
      <a href="estadisticas.html" class="btn btn-primary">Ver Estadísticas Completas</a>
    </div>
  </main>

  <!-- Modal de Búsqueda de Productos -->
  <div class="modal" id="searchModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Buscar Producto</h3>
        <button class="modal-close" id="closeSearch">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <input 
            type="text" 
            class="form-input" 
            id="searchInput" 
            placeholder="Buscar por nombre..."
          >
        </div>
        
        <div class="tabs" id="categoryTabs">
          <button class="tab active" data-category="all">Todos</button>
          <button class="tab" data-category="desayunos">Desayunos</button>
          <button class="tab" data-category="antojitos">Antojitos</button>
          <button class="tab" data-category="guisados">Guisados</button>
          <button class="tab" data-category="bebidas">Bebidas</button>
        </div>

        <div class="grid" id="productsGrid">
          <!-- Se llenará dinámicamente -->
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Creación de Pedido -->
  <div class="modal" id="orderModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="orderModalTitle">Nuevo Pedido</h3>
        <button class="modal-close" id="closeOrder">&times;</button>
      </div>
      <div class="modal-body">
        <form id="orderForm">
          <div class="form-group autocomplete-wrapper">
            <label class="form-label">Nombre del Cliente *</label>
            <input 
              type="text" 
              class="form-input" 
              id="customerName" 
              required
              autocomplete="off"
            >
            <div class="autocomplete-dropdown" id="customerDropdown"></div>
          </div>

          <div class="form-group">
            <button type="button" class="btn btn-secondary btn-sm" id="btnSaveCustomer">
              Guardar Cliente
            </button>
          </div>

          <!-- Complementos -->
          <div id="complementsSection" style="display: none;">
            <div class="form-section">
              <div class="form-section-header">
                <h4 class="form-section-title">Complementos</h4>
              </div>
              <div id="complementsList"></div>
            </div>
          </div>

          <!-- Opciones -->
          <div id="optionsSection" style="display: none;">
            <div class="form-section">
              <div class="form-section-header">
                <h4 class="form-section-title">Opciones de Preparación</h4>
              </div>
              <div id="optionsList"></div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-checkbox">
              <input type="checkbox" id="forNow">
              <label for="forNow">Para Ahorita</label>
            </div>
          </div>

          <div class="form-group" id="deliveryTimeGroup">
            <label class="form-label">Hora de Entrega</label>
            <input type="time" class="form-input" id="deliveryTime">
          </div>

          <div class="form-group">
            <label class="form-label">Notas Adicionales</label>
            <textarea class="form-textarea" id="orderNotes" rows="3"></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">Método de Pago *</label>
            <select class="form-select" id="paymentMethod" required>
              <option value="efectivo">Efectivo</option>
              <option value="transferencia">Transferencia</option>
              <option value="deuda">Deuda</option>
            </select>
          </div>

          <div class="form-group">
            <div class="stat-card">
              <div class="stat-card-value text-success" id="orderTotal">$0.00</div>
              <div class="stat-card-label">Total del Pedido</div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelOrder">Cancelar</button>
        <button class="btn btn-primary" id="createOrder">Crear Pedido</button>
      </div>
    </div>
  </div>

  <!-- Modal de Gestión de Clientes -->
  <div class="modal modal-small" id="customersModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Gestión de Clientes</h3>
        <button class="modal-close" id="closeCustomers">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Agregar Nuevo Cliente</label>
          <div class="flex gap-2">
            <input 
              type="text" 
              class="form-input" 
              id="newCustomerName" 
              placeholder="Nombre del cliente"
            >
            <button class="btn btn-primary btn-sm" id="btnAddCustomer">Agregar</button>
          </div>
        </div>

        <div class="form-section">
          <div class="form-section-header">
            <h4 class="form-section-title">Clientes Guardados</h4>
          </div>
          <div id="customersList" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Pedidos Urgentes -->
  <div class="modal" id="urgentModal">
    <div class="modal-content">
      <div class="modal-header" style="background: var(--danger); color: white;">
        <h3 class="modal-title">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Pedidos Urgentes
        </h3>
      </div>
      <div class="modal-body">
        <p class="text-center text-secondary mb-2">
          Estos pedidos están a menos de 30 minutos de su hora de entrega
        </p>
        <div class="list" id="urgentOrdersList"></div>
      </div>
    </div>
  </div>

  <!-- FAB para Pedidos Urgentes -->
  <button class="fab" id="urgentFab" aria-label="Pedidos urgentes">
    <svg viewBox="0 0 24 24" fill="currentColor">
      <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
      <line x1="12" y1="9" x2="12" y2="13" stroke="white" stroke-width="2"/>
      <line x1="12" y1="17" x2="12.01" y2="17" stroke="white" stroke-width="2"/>
    </svg>
    <span class="fab-badge" id="urgentBadge">0</span>
  </button>

  <!-- Navegación Inferior -->
  <nav class="bottom-nav">
    <div class="bottom-nav-content">
      <a href="index.html" class="nav-item active">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span class="nav-item-label">Inicio</span>
      </a>
      <a href="menu.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
        <span class="nav-item-label">Menú</span>
      </a>
      <a href="deudas.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
          <line x1="1" y1="10" x2="23" y2="10"/>
        </svg>
        <span class="nav-item-label">Deudas</span>
      </a>
      <a href="estadisticas.html" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="20" x2="12" y2="10"/>
          <line x1="18" y1="20" x2="18" y2="4"/>
          <line x1="6" y1="20" x2="6" y2="16"/>
        </svg>
        <span class="nav-item-label">Stats</span>
      </a>
    </div>
  </nav>

  <!-- Audio para alarma -->
  <audio id="alarmSound" loop>
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBi59zPDXjT0IEWGz6+2WWxILTqbh8bFjHAU2jdXuzn0vBSh+zO/blEAKElyx7O+jaRkHPZPU8tCCMAUleMvw24k8CBFfsuzvpWIZC0ed3fC8dCcGN4nP8tiKOAkUZLbq7allGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6+6laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGIYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7aplGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7aplGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7aplGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7aplGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOAkUZLbq7atlGAg5j9Xu0IU1Bi6Cx+7ajD0IElyx6++laBkKP5TR8M6AMAUlecvv24s8CBNgsevvpGEYC0ad3PG7cCcGN4nP8tiKOA==" type="audio/wav">
  </audio>

  <script src="db.js"></script>
  <script src="index.js"></script>
</body>
</html>
